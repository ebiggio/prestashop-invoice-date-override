# Invoice Date Override module for PrestaShop

## Description

By default, PrestaShop uses the invoice date of the orders to calculate several stats for the dashboard and other reports, such as total sales, best-selling products, etc.
If you therefore disable the invoice functionality in your store (for example, if your invoice is generated by a third-party system), you will lose the ability to see these stats in your dashboard.
This small module aims to solve this problem by allowing you to override the invoice date of your orders with the order creation date or order status change date.
This way, you can keep the invoice date functionality disabled in your store and still have the ability to see the stats in your dashboard.

## What does this module do?

- Allows you to define which order status will trigger the invoice date override.
- Allows you to override the invoice date of your orders with the order creation date or order status change date.
- Allows you to clear the invoice date for orders that change to a status that does not trigger the invoice date override.
- Allows you to run the invoice date override process manually from the module's configuration page. Intended to be used when the module is installed on an existing store with orders already created that won't have order status changes that would trigger the invoice date override.

## What does this module not do?

- This module does not change any logic in the stat calculations of PrestaShop. It is known that some stats on the dashboard and certain default reports are inaccurate; this module does not fix these issues.
- This module does not generate invoices for your orders. It only overrides the invoice date of your orders, but won't define the invoice number or any other invoice-related information.
- This module does not automatically disable the invoice functionality in your store. You will need to do this manually in the back office.

## Requirements

- PrestaShop 8 or higher. Not compatible with previous versions because the module hooks into the `actionValidateOrderAfter` hook, which was introduced in PrestaShop 8.
- PHP 8.0 or higher.
- Composer, to generate the necessary autoload files if installing from this repository.

## Installation

To install the module in your PrestaShop instance, you will need a ZIP file containing the module's code and its dependencies.
You can get this ZIP file in two ways: downloading it from the repository's releases or generating it from the source code.

### Getting the module ZIP file

#### From the repository's releases

1. Download the ZIP file of the latest release from the [Releases](https://github.com/ebiggio/prestashop-invoice-date-override/releases) section.

#### From the source code

1. Download this repository to a folder named `invoice_date_override`.
2. Enter that folder, and run the following command to generate the necessary Composer autoload files:

```bash
composer dump-autoload -o --no-dev
```
3. Compress the folder into a ZIP file.

### Installing the module in PrestaShop

1. Upload the ZIP file to your PrestaShop instance. You can do this by going to the back office of your PrestaShop store and navigating to the `Modules` section.
   Click on the `Upload a module` button and select the ZIP file you just created. You can also upload the ZIP file directly to the `modules` folder of your PrestaShop installation.
   If you choose this method, make sure to extract the ZIP file after uploading it, so the `invoice_date_override` folder is created inside the `modules` folder.
2. After uploading the ZIP file, the module should appear in the list of modules in the back office, where you can install it.
3. Once the module is installed, click on the `Configure` button to access the module's configuration page.
4. Configure the module according to your needs and save the changes.
5. The module is now ready to use. The invoice date override process will be triggered automatically when the order status changes to one of the selected statuses.
6. If you have existing orders that need to be updated, you can run the invoice date override process manually from the module's configuration page.
   Keep in mind that this process might take a while to complete, depending on the number of orders you have in your store.